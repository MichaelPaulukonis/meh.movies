# Repository Snapshot: meh.movies ðŸ™„

**Date:** February 5, 2026  
**Project Status:** Functional Prototype / Alpha  
**Maintainability Score:** High (Clean structure, but some legacy scripts)

---

## 1. Project Overview

**meh.movies** is a "Gen-Z-ified" movie discovery platform. It replaces traditional search with an LLM-powered vibe-matching engine. Instead of searching by genre or title, users pick a "mood" (e.g., "absolute brain rot", "main character energy"), and the system uses Claude 3.5 to match these moods against an enriched metadata database.

### Technology Stack

- **Frontend:** Nuxt 3 (Vue 3, SSR), Tailwind CSS.
- **Backend:** Nitro (Nuxt server), SQLite.
- **AI/LLM:**
  - **Enrichment:** Anthropic Claude 3.5 Haiku (via `src/enrich-db.ts`).
  - **Recommendations:** Anthropic Claude 3.5 Sonnet (via `server/api/recommendations.post.ts`).
- **Tooling:** pnpm, TypeScript, `tsx`.

---

## 2. Architecture Summary

The project follows an **Offline Enrichment / Online Inference** pattern.

- **Offline Layer:** CLI scripts process the static movie database, generating Gen-Z tags, vibe keywords, and thematic analysis. These are stored in a dedicated `movie_enrichment` table.
- **Data Layer:** A single SQLite database (`movies.db`) contains the original movie data and the enrichment table.
- **Runtime Layer:** When a user submits a mood:
  1. The server fetches a subset of enriched movies.
  2. A "System Prompt" instructs Claude to act as a Gen-Z assistant.
  3. Claude uses **Tool Use** (structured output) to select the best matches and provide reasoning.
  4. The frontend renders these "serves" with high-energy UI.

---

## 3. Repository Structure

```text
â”œâ”€â”€ db/                 # SQLite database and schema.sql
â”œâ”€â”€ docs/               # Documentation, ADRs, and reference materials
â”œâ”€â”€ pages/              # Nuxt pages (UI)
â”‚   â”œâ”€â”€ index.vue       # Home: Mood picker and recent movies
â”‚   â”œâ”€â”€ search.vue      # Search: Traditional/Query-based discovery
â”‚   â””â”€â”€ movie/[id].vue  # Details: Specific movie view
â”œâ”€â”€ server/             # Nuxt Nitro backend
â”‚   â”œâ”€â”€ api/            # API endpoints (recommendations, movie list)
â”‚   â””â”€â”€ utils/          # Shared logic (DB connections, LLM prompt templates)
â”œâ”€â”€ src/                # Offline processing and legacy CLI scripts
â”‚   â”œâ”€â”€ enrich-db.ts    # Main enrichment runner (Anthropic)
â”‚   â””â”€â”€ legacy/         # (Suggested) src/index.ts, src/enrichment.ts (OpenAI)
â””â”€â”€ components/         # UI Components (currently empty, logic is in pages)
```

---

## 4. Key Features & Workflows

### Core Features

- **Mood-Based Discovery:** 6 predefined moods + natural language input.
- **Enriched Metadata:** Extraction of "vibes", "genre blends", and "watch-with-who" contexts.
- **Gen-Z UI:** Dark mode by default, bold typography, motion-heavy interactions.
- **Prompt Safety:** Input sanitization and system-role guardrails to prevent jailbreaking.

### User Workflows

1. **The Vibe Check:** User clicks a mood on the home page.
2. **The Oracle:** Server sends mood + 20 movie samples to Claude.
3. **The Serve:** Results are displayed with LLM-generated reasoning (e.g., "this movie is literally rent free in my head").

---

## 5. Development Setup

### Quick Start (3 Steps)

1. **Install:** `pnpm install`
2. **Secrets:** Copy `.env.example` to `.env` and add `ANTHROPIC_API_KEY`.
3. **Run:** `pnpm run dev` (App at `http://localhost:3010`)

### Enrichment Workflow

To populate the database with AI metadata:

```bash
# Apply schema
sqlite3 db/movies.db < db/schema.sql
# Run batch process
pnpm run enrich-v2
```

---

## 6. Documentation Assessment

- **ADRs:** Good start (`docs/adr/`), covers language and DB choices.
- **README:** Comprehensive overview of features and setup.
- **Code:** Utility functions are documented; prompt templates are centralized in `server/utils/enrichment-templates.ts`.
- **Gaps:**
  - Missing API documentation (Swagger/OpenAPI).
  - Missing Deployment guide (Vercel/Netlify).

---

## 7. Technical Debt & Improvements

| Area | Issue | Priority |
| :--- | :--- | :--- |
| **Performance** | Recommendation engine only samples 20 movies. Needs vector search or keyword-based SQL filtering. | **High** |
| **Code Hygiene** | Mix of OpenAI (`src/index.ts`) and Anthropic (`src/enrich-db.ts`) scripts. | **Medium** |
| **Architecture** | UI logic is tightly coupled in `pages/`. Should move to `components/`. | **Medium** |
| **Testing** | No automated tests for sanitization or recommendation logic. | **Medium** |
| **Configuration** | `ANTHROPIC_MODEL` is hardcoded in some utils but configurable in others. | **Low** |

---

## 8. Recommendations & Next Steps

### 1. Critical Issues

- **Implement Filtering:** Update `server/api/recommendations.post.ts` to fetch a more relevant subset of movies (e.g., using genre matching or keyword intersection) before sending to the LLM.

### 2. Documentation Improvements

- Create `docs/api/README.md` documenting the POST `/api/recommendations` schema.
- Create `docs/decisions/` for new ADRs.

### 3. Refactoring

- Move the `MovieCard` logic from `index.vue` into `components/MovieCard.vue`.
- Move legacy `src/` files into a `src/legacy/` folder to clarify the current stack.

---

## 9. Project Roadmap (Inferred)

1. **Phase 1 (Done):** Basic enrichment and mood matching.
2. **Phase 2 (Current):** UI Polish and Gen-Z branding.
3. **Phase 3 (Next):** Vector search implementation (SQLite-VSS) for global scale.
4. **Phase 4:** User profiles and "vibe history" tracking.
